# Подготовка проекта к переносу на продовый контур

## 1. Реализовать простой health-check для Kubernetes

Необходимо добавить HTTP endpoint для проверки работоспособности сервиса.  
Он будет использоваться Kubernetes для:

- **readinessProbe**
- **livenessProbe**

### Требования:
- Endpoint должен быть максимально лёгким и быстрым.
- Не должен выполнять запросов к внешним сервисам.
- Не должен зависеть от состояния БД.
- Возвращает:
  - **200 OK** при нормальной работе
  - **500** или другую ошибку в случае проблем приложения

Например: `/health` или `/api/health`.

---

## 2. Обновить README.md: таблица всех ENV-переменных

В файле `README.md` необходимо:

### Добавить таблицу вида:

| Название | Описание | Дефолтное значение |
|---------|----------|--------------------|

Таблица должна включать **все** переменные окружения, которые можно задать в проекте, включая:

- настройки базы данных  
- ключи для Yookassa, Тинькофф, Custom сценария  
- настройки Celery  
- параметры проверки платежей  
- параметры логирования  
- параметры для подключения к TMetr  
- фичи-флаги  
- любые другие переменные

Если переменной нет дефолта → указать `—`.

---

## 3. Поддержка SSL-сертификатов для Postgres на проде

На продовом окружении будет использоваться **отдельный кластер Postgres**, который требует **SSL-соединение** для подключения.

Необходимо:

1. Добавить в конфигурацию БД параметры:
   - `sslmode=require` или подходящее значение
   - путь к сертификату (если требуется)
   - переменные окружения:
     - `POSTGRES_SSL_CERT`
     - `POSTGRES_SSL_KEY`
     - `POSTGRES_SSL_ROOT_CERT`
2. Реализовать загрузку SSL-файлов при старте приложения.
3. Учесть эти параметры в:
   - Django
   - Celery workers
   - Сервисах, использующих прямые подключения
4. На локальных окружениях SSL отключить (дефолтное поведение).

---

## 4. Squash migrations (схлопывание миграций)

Для Django необходимо выполнить:

1. Схлопывание миграций для крупных приложений, где накопилось много файлов миграций.
2. Убедиться, что итоговые миграции корректно работают на чистой базе.
3. Проверить:
   - корректность зависимостей
   - отсутствие удаления важных операций

Squash выполняется через инструменты Django.

## 5. Обнови описание проекта в PROJECT.md
 - Обнови описание проекта в PROJECT.md
 - При разработки учитывай CONSTITUTUON.md