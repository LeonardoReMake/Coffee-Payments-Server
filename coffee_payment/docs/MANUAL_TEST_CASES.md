# –†—É—á–Ω—ã–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã –¥–ª—è Coffee Payments Server

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ë–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (Yookassa)](#–±–∞–∑–æ–≤—ã–π-–ø–ª–∞—Ç–µ–∂–Ω—ã–π-–ø–æ—Ç–æ–∫-yookassa)
2. [–ü–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (TBank)](#–ø–ª–∞—Ç–µ–∂–Ω—ã–π-–ø–æ—Ç–æ–∫-tbank)
3. [–ü–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (Custom)](#–ø–ª–∞—Ç–µ–∂–Ω—ã–π-–ø–æ—Ç–æ–∫-custom)
4. [–¶–µ–ø–æ—á–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–π](#—Ü–µ–ø–æ—á–∫–∞-–≤–∞–ª–∏–¥–∞—Ü–∏–π)
5. [–°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å –∑–∞–∫–∞–∑–æ–≤](#—Å—Ç–∞—Ç—É—Å–Ω–∞—è-–º–æ–¥–µ–ª—å-–∑–∞–∫–∞–∑–æ–≤)
6. [–ú–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤](#–º–µ—Ö–∞–Ω–∏–∑–º-–ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—è-–∑–∞–∫–∞–∑–æ–≤)
7. [Unified Order Status Page](#unified-order-status-page)
8. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
9. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)

---

## –ë–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (Yookassa)

### TC-001: –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Yookassa
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π Yookassa
- –£ –º–µ—Ä—á–∞–Ω—Ç–∞ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ credentials –¥–ª—è Yookassa
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω (heartbeat < 5 –º–∏–Ω—É—Ç)

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (status=created)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø–∏—Ç–∫–∞, —Ä–∞–∑–º–µ—Ä, —Ü–µ–Ω–∞, –∞–¥—Ä–µ—Å
4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ"
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É –≤ Yookassa
6. –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `created`
- –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `pending`
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `paid`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—É, —Å—Ç–∞—Ç—É—Å ‚Üí `make_pending`
- –ü–æ—Å–ª–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å ‚Üí `successful`
- –í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

---

### TC-002: –û—Ç–º–µ–Ω–∞ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Yookassa
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π Yookassa
- –£ –º–µ—Ä—á–∞–Ω—Ç–∞ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ credentials –¥–ª—è Yookassa

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ"
3. –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É –≤ Yookassa
4. –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `not_paid`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞"
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É"
- Polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

---

### TC-003: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `not_paid`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–∫–∞–∑–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `not_paid`
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É"
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É –≤ Yookassa

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–ø–ª–∞—Ç—É
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `pending`
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã —Å—Ç–∞—Ç—É—Å ‚Üí `paid` ‚Üí `make_pending` ‚Üí `successful`

---

## –ü–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (TBank)

### TC-004: –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ TBank
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π TBank
- –£ –º–µ—Ä—á–∞–Ω—Ç–∞ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ credentials –¥–ª—è TBank
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ"
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É –≤ TBank
5. –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ TC-001, –Ω–æ —á–µ—Ä–µ–∑ TBank API
- –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ö–æ–º–∞–Ω–¥–∞ –Ω–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

---

## –ü–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ (Custom)

### TC-005: –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≤–Ω–µ—à–Ω—é—é —Å–∏—Å—Ç–µ–º—É –æ–ø–ª–∞—Ç—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π Custom
- –£ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ `redirect_url`
- –£ –º–µ—Ä—á–∞–Ω—Ç–∞ –µ—Å—Ç—å credentials –¥–ª—è Custom —Å—Ü–µ–Ω–∞—Ä–∏—è

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `device.redirect_url`
- –í URL –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫–∞–∑–∞
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `created`

---

## –¶–µ–ø–æ—á–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–π

### TC-006: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ö–µ—à–∞ –∑–∞–ø—Ä–æ—Å–∞ (placeholder)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ (placeholder —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ö–µ—à–∞

---

### TC-007: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ - –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- UUID –∑–∞–∫–∞–∑–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å –Ω–æ–≤—ã–º UUID

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `created`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `expires_at` = —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è + ORDER_EXPIRATION_MINUTES
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `drink_number` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

---

### TC-008: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤–∞–ª–∏–¥–Ω—ã–π –∑–∞–∫–∞–∑
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ —Å –¥–∞–Ω–Ω—ã–º UUID —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ = `created`
- –ó–∞–∫–∞–∑ –Ω–µ –ø—Ä–æ—Ç—É—Ö (expires_at > —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è)

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º UUID –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑
- –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞

---

### TC-009: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ - –ø—Ä–æ—Ç—É—Ö—à–∏–π –∑–∞–∫–∞–∑
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ —Å –¥–∞–Ω–Ω—ã–º UUID —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ó–∞–∫–∞–∑ –ø—Ä–æ—Ç—É—Ö (expires_at < —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è)

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å ORDER_EXPIRATION_MINUTES –º–∏–Ω—É—Ç
3. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å UUID –ø—Ä–æ—Ç—É—Ö—à–µ–≥–æ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –∑–∞–∫–∞–∑–∞
- –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –æ–± –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

---

### TC-010: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ü–æ—Å–ª–µ–¥–Ω–∏–π heartbeat —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ < DEVICE_ONLINE_THRESHOLD_MINUTES –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥

**–®–∞–≥–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ heartbeat –Ω–µ–¥–∞–≤–Ω–æ
2. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
- –í –ª–æ–≥–∞—Ö: "Device {uuid} is online. Last heartbeat: {timestamp}, threshold: {N} minutes"

---

### TC-011: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ñ–ª–∞–π–Ω
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ü–æ—Å–ª–µ–¥–Ω–∏–π heartbeat —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ > DEVICE_ONLINE_THRESHOLD_MINUTES –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥

**–®–∞–≥–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ heartbeat –¥–∞–≤–Ω–æ
2. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
- –ó–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –í –ª–æ–≥–∞—Ö: "Device {uuid} is offline. Last heartbeat: {timestamp}, threshold: {N} minutes"

---

### TC-012: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - –æ—à–∏–±–∫–∞ API Tmetr
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- API Tmetr –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–®–∞–≥–∏:**
1. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API Tmetr (–æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω)
2. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
- –ó–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

---

## –°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å –∑–∞–∫–∞–∑–æ–≤

### TC-013: –ü–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–æ–≤ - –ø–æ–ª–Ω—ã–π —É—Å–ø–µ—à–Ω—ã–π —Ü–∏–∫–ª
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω
- –í–∞–ª–∏–¥–Ω—ã–µ credentials –º–µ—Ä—á–∞–Ω—Ç–∞

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ (–æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR)
2. –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂
3. –û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑
4. –î–æ–∂–¥–∞—Ç—å—Å—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –Ω–∞–ø–∏—Ç–∫–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å—ã –º–µ–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ: `created` ‚Üí `pending` ‚Üí `paid` ‚Üí `make_pending` ‚Üí `successful`
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

### TC-014: –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Å—Ç–∞—Ç—É—Å failed –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `paid`
- –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—É

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∏ –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑
2. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É API Tmetr –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `failed`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- Polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

---

## –ú–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

### TC-015: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ expires_at –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- ORDER_EXPIRATION_MINUTES = 15 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–µ `expires_at` –≤ –ë–î

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- `expires_at` = –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è + 15 –º–∏–Ω—É—Ç
- –í—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ —Å —Ç–∞–π–º–∑–æ–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, +03:00)

---

### TC-016: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—É—Å–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `created`
- –ó–∞–∫–∞–∑ –±–ª–∏–∑–æ–∫ –∫ –ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—é

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è `expires_at`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è: –∫–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ" –∞–∫—Ç–∏–≤–Ω–∞
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è: –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞
- Polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

---

### TC-017: Webhook –¥–ª—è –ø—Ä–æ—Ç—É—Ö—à–µ–≥–æ –∑–∞–∫–∞–∑–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –∏ –æ–ø–ª–∞—á–µ–Ω
- –ó–∞–∫–∞–∑ –ø—Ä–æ—Ç—É—Ö –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è webhook

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
2. –ò–∑–º–µ–Ω–∏—Ç—å `expires_at` –Ω–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å webhook –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –∑–∞–∫–∞–∑ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ—Ç—É—Ö—à–µ–º –∑–∞–∫–∞–∑–µ
- –ö–æ–º–∞–Ω–¥–∞ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

---

## Unified Order Status Page

### TC-018: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ created
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `created`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/v1/order-status-page?order_id={order_id}`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ üìã
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–∫–∞–∑ –¥–ª—è –æ–ø–ª–∞—Ç—ã"
- –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ" –∞–∫—Ç–∏–≤–Ω–∞
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info`
- Polling –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

---

### TC-019: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ pending —Å polling
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
2. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏–Ω–Ω–µ—Ä
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–ø–ª–∞—Ç—É –∑–∞–∫–∞–∑–∞..."
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info_pending`
- Polling –∞–∫—Ç–∏–≤–µ–Ω (–∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –∫ `/v1/order-status/{order_id}`)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

---

### TC-020: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ paid
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `paid`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –≥–∞–ª–æ—á–∫–∏ (—É—Å–ø–µ—Ö)
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –≥–æ—Ç–æ–≤–∏—Ç—å"
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info_paid`
- Polling –∞–∫—Ç–∏–≤–µ–Ω

---

### TC-021: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ not_paid —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–≤—Ç–æ—Ä–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `not_paid`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–æ—à–∏–±–∫–∞)
- –û–ø–∏—Å–∞–Ω–∏–µ: "–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞"
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info_not_paid`
- Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

### TC-022: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ make_pending
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `make_pending`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏–Ω–Ω–µ—Ä
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ì–æ—Ç–æ–≤–∏–º –Ω–∞–ø–∏—Ç–æ–∫..."
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info_make_pending`
- Polling –∞–∫—Ç–∏–≤–µ–Ω

---

### TC-023: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ successful
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `successful`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –≥–∞–ª–æ—á–∫–∏ (—É—Å–ø–µ—Ö)
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ù–∞–ø–∏—Ç–æ–∫ –≥–æ—Ç–æ–≤"
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `Device.client_info_successful`
- Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

### TC-024: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ failed
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `failed`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–æ—à–∏–±–∫–∞)
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–∫–∞–∑–∞"
- Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

### TC-025: –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–æ–≤

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`
2. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —Å—Ç–∞—Ç—É—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏ –ø–ª–∞–≤–Ω—ã–µ
- –ù–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

---

### TC-026: API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å GET –∑–∞–ø—Ä–æ—Å –∫ `/v1/order-status/{order_id}`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–∫–∞–∑–µ:
  - order_id
  - status
  - drink_name
  - drink_size
  - price
  - expires_at (—Å —Ç–∞–π–º–∑–æ–Ω–æ–π)
  - device (location, logo_url, –≤—Å–µ client_info_* –ø–æ–ª—è)
- HTTP —Å—Ç–∞—Ç—É—Å 200

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### TC-027: –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ —Å –±—Ä–µ–Ω–¥–∏–Ω–≥–æ–º –º–µ—Ä—á–∞–Ω—Ç–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `logo_url` –∏ `client_error_info`

**–®–∞–≥–∏:**
1. –í—ã–∑–≤–∞—Ç—å –ª—é–±—É—é –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ñ–ª–∞–π–Ω)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–æ–≥–æ—Ç–∏–ø –º–µ—Ä—á–∞–Ω—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è ‚ö†Ô∏è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `client_error_info` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML
- Mobile-first –¥–∏–∑–∞–π–Ω, –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞

---

### TC-028: –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ –±–µ–∑ –±—Ä–µ–Ω–¥–∏–Ω–≥–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `logo_url` –∏ `client_error_info`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ù–µ—Ç –ª–æ–≥–æ—Ç–∏–ø–∞ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- Graceful degradation —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### TC-029: HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ client_error_info
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- `client_error_info` —Å–æ–¥–µ—Ä–∂–∏—Ç HTML (—Å—Å—ã–ª–∫–∏, –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫)

**–®–∞–≥–∏:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `client_error_info` —Å HTML: `–ü–æ–∑–≤–æ–Ω–∏—Ç–µ: <a href="tel:+79001234567">+7 900 123-45-67</a>`
2. –í—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTML –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –°—Å—ã–ª–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

### TC-030: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –§–∞–π–ª `user_messages.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–®–∞–≥–∏:**
1. –í—ã–∑–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
   - invalid_request_hash
   - device_offline
   - heartbeat_check_failed
   - order_expired
   - –∏ —Ç.–¥.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ `user_messages.py`
- –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–Ω—è—Ç–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ù–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π –≤ UI

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### TC-031: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yookassa credentials —á–µ—Ä–µ–∑ Django Admin
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –î–æ—Å—Ç—É–ø –∫ Django Admin

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –≤ Django Admin
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ "Merchant Credentials"
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å:
   - Merchant: –≤—ã–±—Ä–∞—Ç—å –º–µ—Ä—á–∞–Ω—Ç–∞
   - Scenario: Yookassa
   - Credentials: `{"account_id": "123", "secret_key": "key"}`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Credentials —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–ø–∏—Å—å –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (merchant, scenario)
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç - –æ—à–∏–±–∫–∞

---

### TC-032: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TBank credentials —á–µ—Ä–µ–∑ Django Admin
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –î–æ—Å—Ç—É–ø –∫ Django Admin

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å MerchantCredentials –¥–ª—è TBank
2. –£–∫–∞–∑–∞—Ç—å credentials: `{"shop_id": "123", "secret_key": "key", "success_url": "...", "fail_url": "..."}`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Credentials —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞

---

### TC-033: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Custom credentials —á–µ—Ä–µ–∑ Django Admin
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –î–æ—Å—Ç—É–ø –∫ Django Admin

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å MerchantCredentials –¥–ª—è Custom
2. –£–∫–∞–∑–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ credentials –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Credentials —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (–≥–∏–±–∫–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º)

---

### TC-034: –ò–∑–º–µ–Ω–µ–Ω–∏–µ payment_scenario –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –î–æ—Å—Ç—É–ø –∫ Django Admin

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ Django Admin
2. –ò–∑–º–µ–Ω–∏—Ç—å `payment_scenario` —Å Yookassa –Ω–∞ TBank
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
4. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ü–µ–Ω–∞—Ä–∏–π –º–µ–Ω—è–µ—Ç—Å—è
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è credentials –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è

---

### TC-035: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±–µ–∑ credentials –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π TBank
- –£ –º–µ—Ä—á–∞–Ω—Ç–∞ –Ω–µ—Ç credentials –¥–ª—è TBank

**–®–∞–≥–∏:**
1. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–∫–∞–∑ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `failed`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ credentials

---

### TC-036: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ logo_url –∏ client_info –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ Django Admin
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å `logo_url`: https://example.com/logo.png
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å `client_info`: "–ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏: +7 900 123-45-67"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ `client_info_*` –ø–æ–ª—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
6. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ–æ–≥–æ—Ç–∏–ø –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞
- HTML –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## UI/UX –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

### TC-037: Mobile-first –¥–∏–∑–∞–π–Ω - —Å–º–∞—Ä—Ç—Ñ–æ–Ω (320px)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å —à–∏—Ä–∏–Ω–æ–π 320px
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –¢–µ–∫—Å—Ç —á–∏—Ç–∞–µ–º
- –ö–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
- –ù–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è

---

### TC-038: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –ø–ª–∞–Ω—à–µ—Ç (768px)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å —à–∏—Ä–∏–Ω–æ–π 768px

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞
- –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

### TC-039: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –¥–µ—Å–∫—Ç–æ–ø (1920px)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å —à–∏—Ä–∏–Ω–æ–π 1920px

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –î–∏–∑–∞–π–Ω –≤—ã–≥–ª—è–¥–∏—Ç –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ

---

### TC-040: Accessibility - high contrast mode
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –í–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç–∏ –≤ –û–°

**–®–∞–≥–∏:**
1. –í–∫–ª—é—á–∏—Ç—å high contrast mode
2. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è
- –¢–µ–∫—Å—Ç —á–∏—Ç–∞–µ–º

---

### TC-041: Accessibility - reduced motion
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –í–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º —É–º–µ–Ω—å—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –≤ –û–°

**–®–∞–≥–∏:**
1. –í–∫–ª—é—á–∏—Ç—å reduced motion mode
2. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º, –≥–¥–µ –µ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (pending, make_pending)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –∏–ª–∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

### TC-042: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–ø–∏—Ç–∫–µ –∏–∑ Tmetr API
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Tmetr
- –í–∞–ª–∏–¥–Ω—ã–π TMETR_TOKEN

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–∞–ø–∏—Ç–∫–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ Tmetr API

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å –∫ Tmetr API –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- –ü–æ–ª—É—á–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ø–∏—Ç–∫–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫–∞–∑–∞
- –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

---

### TC-043: –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –≤ Tmetr API
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω (—Å—Ç–∞—Ç—É—Å `paid`)

**–®–∞–≥–∏:**
1. –û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Tmetr API
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `make_pending`
- –í –∫–æ–º–∞–Ω–¥–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `drink_number`
- –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

---

### TC-044: Webhook –æ—Ç Yookassa - —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å webhook –æ—Ç Yookassa —Å —Å–æ–±—ã—Ç–∏–µ–º —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `paid`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—É
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–∏–µ webhook

---

### TC-045: Webhook –æ—Ç Yookassa - –æ—Ç–º–µ–Ω–∞ –æ–ø–ª–∞—Ç—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å webhook –æ—Ç Yookassa —Å —Å–æ–±—ã—Ç–∏–µ–º –æ—Ç–º–µ–Ω—ã –æ–ø–ª–∞—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `not_paid`
- –ö–æ–º–∞–Ω–¥–∞ –Ω–∞ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—Ç–º–µ–Ω–∞ –æ–ø–ª–∞—Ç—ã

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### TC-046: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –ª–æ–≥–æ–≤ `logs/coffee_payment.log`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –Ω–∞—á–∞–ª–æ —Ü–µ–ø–æ—á–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–π
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏
- –§–æ—Ä–º–∞—Ç: `[timestamp] [—É—Ä–æ–≤–µ–Ω—å] [—Ñ—É–Ω–∫—Ü–∏—è] —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º`
- Timestamp —Å —Ç–∞–π–º–∑–æ–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2025-11-13T10:30:00+03:00)

---

### TC-047: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É API

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∑–∞–ø—Ä–æ—Å –∫ API (Tmetr, Yookassa, TBank)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è URL –∑–∞–ø—Ä–æ—Å–∞
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—Ç–≤–µ—Ç (–∏–ª–∏ –æ—à–∏–±–∫–∞)
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

### TC-048: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –õ—é–±–∞—è –æ—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ

**–®–∞–≥–∏:**
1. –í—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ñ–ª–∞–π–Ω)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å —É—Ä–æ–≤–Ω–µ–º ERROR
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (device_uuid, order_uuid –∏ —Ç.–¥.)
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è stack trace (–¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### TC-049: Legacy URL - /v1/yook-pay
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –°—Ç–∞—Ä—ã–π QR-–∫–æ–¥ —Å URL `/v1/yook-pay`

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å–æ —Å—Ç–∞—Ä—ã–º URL

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `process_payment_flow`
- –°—Ü–µ–Ω–∞—Ä–∏–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `/v1/pay`

---

### TC-050: Legacy URL - /v1/tbank-pay
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –°—Ç–∞—Ä—ã–π QR-–∫–æ–¥ —Å URL `/v1/tbank-pay`

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å–æ —Å—Ç–∞—Ä—ã–º URL

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `process_payment_flow`
- –°—Ü–µ–Ω–∞—Ä–∏–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `/v1/pay`

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### TC-051: –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω

**–®–∞–≥–∏:**
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥
2. –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –¥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–±—â–µ–µ –≤—Ä–µ–º—è < 3 —Å–µ–∫—É–Ω–¥
- –ó–∞–ø—Ä–æ—Å –∫ Tmetr heartbeat API < 1-2 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫

---

### TC-052: –ß–∞—Å—Ç–æ—Ç–∞ polling –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—É—Å–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ —Å –∞–∫—Ç–∏–≤–Ω—ã–º polling (pending, paid, make_pending)

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
2. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ DevTools

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- –ù–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤)

---

