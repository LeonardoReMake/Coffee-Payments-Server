# Фича: Запуск Django приложения на продовом окружении через Gunicorn + Uvicorn

## 1. Общая задача

Необходимо подготовить проект к продовому запуску Django-приложения в Kubernetes.  
Запуск должен выполняться через **Gunicorn + Uvicorn workers**.  
CI/CD реализовывать не нужно — этим занимается DevOps.

---

## 2. Требования к продовому запуску

### 2.1. Использовать связку Gunicorn + Uvicorn

В продовой конфигурации приложение должно запускаться следующим образом:

- Gunicorn — основной процесс-менеджер
- UvicornWorker — обработка ASGI-запросов

Параметры (число воркеров, порт и т.д.) должны конфигурироваться через ENV-переменные.

---

## 3. Dockerfile (обновить или создать при необходимости)

Продовый образ должен:

1. Устанавливать Gunicorn и Uvicorn
2. Запускать приложение через Gunicorn + UvicornWorker
3. Поддерживать использование ENV-переменных

---

## 4. Kubernetes: общие требования

DevOps будет писать манифесты, но необходимо подготовить приложение к корректной работе в Kubernetes.

### Необходимо учесть:

- Поддержку graceful shutdown (ASGI уже поддерживает, но важно не ломать сигналы SIGTERM/SIGINT)
- Корректный health-check endpoint (`/health`), который использует readiness/liveness probes
- Возможность настройки:
  - количества воркеров
  - таймаутов Gunicorn
  - максимального числа запросов на воркер
- Поддержку SSL-подключения к базе (если ранее добавлено)

Никаких CI/CD действий делать не нужно.

---

## 5. ENV-переменные для продового запуска

Добавить эти переменные в README.md (если их там ещё нет):

| Название | Описание | Дефолт |
|---------|----------|--------|
| `GUNICORN_WORKERS` | Количество воркеров Gunicorn | `4` |
| `GUNICORN_PORT` | Порт Gunicorn | `8000` |
| `GUNICORN_TIMEOUT` | Таймаут обработки запроса | `30` |
| `GUNICORN_MAX_REQUESTS` | Кол-во запросов до перезапуска воркера | `0` |
| `GUNICORN_MAX_REQUESTS_JITTER` | Jitter перезапуска | `0` |

---

## 6. Обнови описание проекта в PROJECT.md
 - Обнови описание проекта в PROJECT.md
 - При разработки учитывай CONSTITUTUON.md